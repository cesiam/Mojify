[build]
builder = "nixpacks"

# Backend service
[[services]]
name = "backend"
source = "backend"
startCommand = "uvicorn main:app --host 0.0.0.0 --port $PORT"

[services.healthcheck]
path = "/health"

# Frontend service
[[services]]
name = "frontend"
source = "frontend"
buildCommand = "npm install && npm run build"
startCommand = "npx serve dist -l $PORT --no-clipboard"
